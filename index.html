<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Order Form</title>
    <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.3/dist/css/bootstrap.min.css" rel="stylesheet" integrity="sha384-QWTKZyjpPEjISv5WaRU9OFeRpok6YctnYmDr5pNlyT2bRjXh0JMhjY6hW+ALEwIH" crossorigin="anonymous">
    <style>
        body {
            display: flex;
            flex-wrap: wrap;
            min-height: 100vh;
            gap: 20px;
            padding: 20px;
        }

        .form-container, .order-summary {
            width: 100%;
            padding: 20px;
            background-color: #fff;
            border-radius: 10px;
            box-shadow: 0px 0px 10px rgba(0, 0, 0, 0.1);
        }

        .form-container {
            flex: 1;
        }

        .order-summary {
            flex: 1;
            background-color: #f8f8f8;
        }

        .btn {
            margin-right: 10px;
        }

        #orderDetails {
            margin-top: 20px;
        }

        .order-item {
            margin-bottom: 10px;
            padding-bottom: 5px;
        }

        .order-item .item-details {
            display: flex;
            justify-content: space-between;
            align-items: center;
        }

        .order-item img {
            width: 50px;
            border-radius: 5px;
        }

        .order-item .item-name {
            font-weight: bold;
        }

        .order-item .item-price {
            color: #666;
        }

        .order-item .item-total {
            font-weight: bold;
        }

        .total-amount {
            margin-top: 20px;
            font-size: 18px;
            font-weight: bold;
            border-top: 1px solid #ccc;
            padding-top: 10px;
        }

        .item-list {
            display: flex;
            flex-wrap: wrap;
        }

        .item {
            width: 150px;
            margin: 10px;
            text-align: center;
        }

        .item img {
            width: 100%;
            cursor: pointer;
        }

        @media (max-width: 768px) {
            .item {
                width: 30%;
                margin: 5px;
            }

            .item img {
                width: 100%;
            }
        }

        .order-table {
            width: 100%;
            border-collapse: collapse;
        }

        .order-table td, .order-table th {
            border: none;
            padding: 8px;
        }

        .order-table th {
            text-align: left;
        }

        .order-table .item-total {
            text-align: right;
        }

        .order-table .total-row {
            font-weight: bold;
            border-top: 1px solid #ccc;
        }
    </style>
</head>

<body>
<div class="form-container">
    <h1>Order Form</h1>
        <div class="mb-3">
            <label for="customerName" class="form-label">Nama Pelanggan</label>
            <input type="text" class="form-control" id="customerName" required>
        </div>
        <div class="mb-3">
            <label for="orderDate" class="form-label">Tanggal Pemesanan</label>
            <input type="date" class="form-control" id="orderDate" required>
        </div>
        <h3>Pilih Barang</h3>
        <h4>Makanan</h4>
        <div class="item-list" id="makananList">
            <!-- Makanan items will be dynamically generated here -->
        </div>
        <h4>Minuman</h4>
        <div class="item-list" id="minumanList">
            <!-- Minuman items will be dynamically generated here -->
        </div>
        <h4>Jajanan</h4>
        <div class="item-list" id="jajananList">
            <!-- Jajanan items will be dynamically generated here -->
        </div>
        <h4>Topping</h4>
        <div class="item-list" id="toppingList">
            <!-- Topping items will be dynamically generated here -->
        </div>
        <div class="mb-3">
            <label for="paymentMethod" class="form-label">Metode Pembayaran</label>
            <select class="form-select" id="paymentMethod">
                <option value="cash">Cash</option>
                <option value="transfer">Transfer</option>
            </select>
        </div>
        <div class="mb-3">
            <label for="paymentStatus" class="form-label">Status Pembayaran</label>
            <select class="form-select" id="paymentStatus">
                <option value="paid">Sudah Dibayar</option>
                <option value="unpaid">Belum Dibayar</option>
            </select>
        </div>
    <button class="btn btn-primary" onclick="saveOrder()">Simpan Data</button>
    <button class="btn btn-secondary" onclick="window.location.href='tabel.html'">Lihat Semua Pesanan</button>
</div>

<div class="order-summary">
    <h2>Struk Pemesanan</h2>
    <table class="order-table">
        <thead>
            <tr>
                <th>Nama</th>
                <th>Harga</th>
                <th>Qty</th>
                <th>Jumlah</th>
                <th>Hapus</th>
            </tr>
        </thead>
        <tbody id="orderDetails">
            <!-- Order details will be displayed here -->
        </tbody>
    </table>
    <div class="total-amount">
        Total: Rp <span id="totalAmount">0</span>
    </div>
</div>

<script>
    const items = [
        { id: 1, name: "Nasi Goreng", price: 15000, img: "nasigoreng.png", type: "makanan" },
        { id: 2, name: "Mie Goreng", price: 12000, img: "miegoreng.png", type: "makanan" },
        { id: 3, name: "Mie Kuah", price: 13000, img: "miekuah.png", type: "makanan" },
        { id: 4, name: "Minuman Reguler", price: 5000, img: "minumanreguler.png", type: "minuman" },
        { id: 5, name: "Minuman Jumbo", price: 8000, img: "minumanjumbo.png", type: "minuman" },
        { id: 6, name: "Teh Anget", price: 4000, img: "tehanget.png", type: "minuman" },
        { id: 7, name: "Air Putih", price: 3000, img: "airputih.png", type: "minuman" },
        { id: 8, name: "Air Es", price: 3000, img: "aires.png", type: "minuman" },
        { id: 9, name: "Air Es Jumbo", price: 5000, img: "airesjumbo.png", type: "minuman" },
        { id: 10, name: "Soto", price: 15000, img: "soto.png", type: "makanan" },
        { id: 11, name: "Magelangan", price: 15000, img: "magelangan.png", type: "makanan" },
        { id: 12, name: "Nasi Telur", price: 12000, img: "nasitelur.png", type: "makanan" },
        { id: 13, name: "Nasi Ayam", price: 18000, img: "nasiayam.png", type: "makanan" },
        { id: 14, name: "Nasi Rawon", price: 20000, img: "nasirawon.png", type: "makanan" },
        { id: 15, name: "Ciken Steak", price: 25000, img: "cikensteak.png", type: "jajanan" },
        { id: 16, name: "Krupuk", price: 2000, img: "krupuk.png", type: "jajanan" },
        { id: 17, name: "Donat Topping", price: 5000, img: "donattopping.png", type: "jajanan" },
        { id: 18, name: "Donat Isi", price: 6000, img: "donatisi.png", type: "jajanan" },
        { id: 19, name: "Roti Sus", price: 7000, img: "rotisus.png", type: "jajanan" },
        { id: 20, name: "Lumpia", price: 5000, img: "lumpia.png", type: "jajanan" },
        { id: 21, name: "Pastel", price: 5000, img: "pastel.png", type: "jajanan" },
        { id: 22, name: "Tahu", price: 3000, img: "tahu.png", type: "topping" },
        { id: 23, name: "Tempe", price: 3000, img: "tempe.png", type: "topping" },
        { id: 24, name: "Telur", price: 5000, img: "telur.png", type: "topping" },
        { id: 25, name: "Ayam", price: 10000, img: "ayam.png", type: "topping" }
    ];

    let order = JSON.parse(localStorage.getItem('order')) || [];

    function updateOrderSummary() {
        const orderDetails = document.getElementById('orderDetails');
        const totalAmount = document.getElementById('totalAmount');
        orderDetails.innerHTML = '';
        let total = 0;

        order.forEach((item, index) => {
            const itemTotal = item.price * item.quantity;
            total += itemTotal;
            orderDetails.innerHTML += `
                <tr>
                    <td>${item.name}</td>
                    <td>Rp ${item.price}</td>
                    <td>${item.quantity}</td>
                    <td class="item-total">Rp ${itemTotal}</td>
                    <td><button class="btn btn-sm btn-danger ms-2" onclick="removeItem(${index})">X</button></td>
                </tr>
            `;
        });

        orderDetails.innerHTML += `
            <tr class="total-row">
                <td colspan="3">Total</td>
                <td class="item-total">Rp ${total}</td>
                <td></td>
            </tr>
        `;
        totalAmount.innerText = total;
    }

    function addItemToOrder(itemId) {
        const item = items.find(i => i.id === itemId);
        const existingItem = order.find(i => i.id === itemId);

        if (existingItem) {
            existingItem.quantity++;
        } else {
            order.push({ ...item, quantity: 1 });
        }

        updateOrderSummary();
    }

    function removeItem(index) {
        order.splice(index, 1);
        updateOrderSummary();
    }

    function loadItems() {
        const makananList = document.getElementById('makananList');
        const minumanList = document.getElementById('minumanList');
        const jajananList = document.getElementById('jajananList');
        const toppingList = document.getElementById('toppingList');

        items.forEach(item => {
            const itemHTML = `
                <div class="item" onclick="addItemToOrder(${item.id})">
                    <img src="${item.img}" alt="${item.name}" class="img-thumbnail">
                    <div>${item.name}</div>
                    <div>Rp ${item.price}</div>
                </div>
            `;
            switch (item.type) {
                case 'makanan':
                    makananList.innerHTML += itemHTML;
                    break;
                case 'minuman':
                    minumanList.innerHTML += itemHTML;
                    break;
                case 'jajanan':
                    jajananList.innerHTML += itemHTML;
                    break;
                case 'topping':
                    toppingList.innerHTML += itemHTML;
                    break;
            }
        });
    }

    function saveOrder() {
        if (confirm("Apakah Anda yakin ingin menyimpan pesanan ini?")) {
            const customerName = document.getElementById('customerName').value;
            const orderDate = document.getElementById('orderDate').value;
            const paymentMethod = document.getElementById('paymentMethod').value;
            const paymentStatus = document.getElementById('paymentStatus').value;

            const orderData = {
                customerName,
                orderDate,
                paymentMethod,
                paymentStatus,
                order
            };

            let allOrders = JSON.parse(localStorage.getItem('allOrders')) || [];
            allOrders.push(orderData);
            localStorage.setItem('allOrders', JSON.stringify(allOrders));

            alert("Pesanan berhasil disimpan!");
            document.getElementById('customerName').value = '';
            document.getElementById('orderDate').value = '';
            document.getElementById('paymentMethod').value = 'cash';
            document.getElementById('paymentStatus').value = 'unpaid';
            order = [];
            updateOrderSummary();
        }
    }

    document.addEventListener('DOMContentLoaded', () => {
        loadItems();
        updateOrderSummary();
    });
</script>

<script src="https://cdn.jsdelivr.net/npm/@popperjs/core@2.11.8/dist/umd/popper.min.js" integrity="sha384-I7E8VVD/ismYTF4hNIPjVp/Zjvgyol6VFvRkX/vR+Vc4jQkC+hVqc2pM8ODewa9r" crossorigin="anonymous"></script>
<script src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.3/dist/js/bootstrap.min.js" integrity="sha384-0pUGZvbkm6XF6gxjEnlmuGrJXVbNuzT9qBBavbLwCsOGabYfZo0T0to5eqruptLy" crossorigin="anonymous"></script>

</body>
</html>
